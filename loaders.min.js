'use strict';THREE.OBJLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.OBJLoader.prototype={constructor:THREE.OBJLoader,load:function(a,c,d,m){var h=this;d=new THREE.XHRLoader(h.manager);d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){c(h.parse(a))})},parse:function(a){function c(a,b,c){return new THREE.Vector3(a,b,c)}function d(a,b){return new THREE.Vector2(a,b)}function m(a,b,c,d){return new THREE.Face3(a,b,c,d)}a=a.replace(/\ \\\r\n/g,"");a=a.replace(/f( +\d+)( +\d+)( +\d+)( +\d+)/g,"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)/g,
"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)/g,"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)/g,"/f$1$2$4\n/f$2$3$4");var h=new THREE.Object3D,b,p,e;!1===/^o /gm.test(a)&&(b=new THREE.Geometry,p=new THREE.MeshLambertMaterial,e=new THREE.Mesh(b,p),h.add(e));var k=[];e=0;var s=[],t=[],q=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,r=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,
u=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,v=/f( +\d+)( +\d+)( +\d+)/,y=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))/,z=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))/,A=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))/,w=a.split("\n");for(a=0;a<w.length;a++){var n=w[a],n=n.trim(),f;0!==n.length&&"#"!==n.charAt(0)&&(null!==(f=q.exec(n))?k.push(c(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]))):null!==(f=r.exec(n))?s.push(c(parseFloat(f[1]),parseFloat(f[2]),
parseFloat(f[3]))):null!==(f=u.exec(n))?t.push(d(parseFloat(f[1]),parseFloat(f[2]))):null!==(f=v.exec(n))?(b.vertices.push(k[parseInt(f[1])-1],k[parseInt(f[2])-1],k[parseInt(f[3])-1]),b.faces.push(m(e++,e++,e++))):null!==(f=y.exec(n))?(b.vertices.push(k[parseInt(f[2])-1],k[parseInt(f[5])-1],k[parseInt(f[8])-1]),b.faces.push(m(e++,e++,e++)),b.faceVertexUvs[0].push([t[parseInt(f[3])-1],t[parseInt(f[6])-1],t[parseInt(f[9])-1]])):null!==(f=z.exec(n))?(b.vertices.push(k[parseInt(f[2])-1],k[parseInt(f[6])-
1],k[parseInt(f[10])-1]),b.faces.push(m(e++,e++,e++,[s[parseInt(f[4])-1],s[parseInt(f[8])-1],s[parseInt(f[12])-1]])),b.faceVertexUvs[0].push([t[parseInt(f[3])-1],t[parseInt(f[7])-1],t[parseInt(f[11])-1]])):null!==(f=A.exec(n))?(b.vertices.push(k[parseInt(f[2])-1],k[parseInt(f[5])-1],k[parseInt(f[8])-1]),b.faces.push(m(e++,e++,e++,[s[parseInt(f[3])-1],s[parseInt(f[6])-1],s[parseInt(f[9])-1]]))):/^o /.test(n)?(b=new THREE.Geometry,p=new THREE.MeshLambertMaterial,e=new THREE.Mesh(b,p),e.name=n.substring(2).trim(),
h.add(e),e=0):/^g /.test(n)||(/^usemtl /.test(n)?p.name=n.substring(7).trim():/^mtllib /.test(n)||/^s /.test(n)))}a=0;for(p=h.children.length;a<p;a++)b=h.children[a].geometry,b.computeCentroids(),b.computeFaceNormals(),b.computeBoundingSphere();return h}};THREE.MTLLoader=function(a,c,d){this.baseUrl=a;this.options=c;this.crossOrigin=d};
THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(a,c,d,m){var h=this;d=new THREE.XHRLoader;d.setCrossOrigin(this.crossOrigin);d.load(a,function(a){c(h.parse(a))})},parse:function(a){var c=a.split("\n"),d={},m=/\s+/;a={};for(var h=0;h<c.length;h++){var b=c[h],b=b.trim();if(0!==b.length&&"#"!==b.charAt(0)){var p=b.indexOf(" "),e=0<=p?b.substring(0,p):b,e=e.toLowerCase(),b=0<=p?b.substring(p+1):"",b=b.trim();"newmtl"===e?(d={name:b},a[b]=d):d&&("ka"===e||"kd"===e||"ks"===e?(b=b.split(m,
3),d[e]=[parseFloat(b[0]),parseFloat(b[1]),parseFloat(b[2])]):d[e]=b)}}c=new THREE.MTLLoader.MaterialCreator(this.baseUrl,this.options);c.setMaterials(a);return c}};THREE.MTLLoader.MaterialCreator=function(a,c){this.baseUrl=a;this.options=c;this.materialsInfo={};this.materials={};this.materialsArray=[];this.nameLookup={};this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide;this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping};
THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,setMaterials:function(a){this.materialsInfo=this.convert(a);this.materials={};this.materialsArray=[];this.nameLookup={}},convert:function(a){if(!this.options)return a;var c={},d;for(d in a){var m=a[d],h={};c[d]=h;for(var b in m){var p=!0,e=m[b],k=b.toLowerCase();switch(k){case "kd":case "ka":case "ks":this.options&&this.options.normalizeRGB&&(e=[e[0]/255,e[1]/255,e[2]/255]);this.options&&this.options.ignoreZeroRGBs&&
0===e[0]&&0===e[1]&&0===e[1]&&(p=!1);break;case "d":this.options&&this.options.invertTransparency&&(e=1-e)}p&&(h[k]=e)}}return c},preload:function(){for(var a in this.materialsInfo)this.create(a)},getIndex:function(a){return this.nameLookup[a]},getAsArray:function(){var a=0,c;for(c in this.materialsInfo)this.materialsArray[a]=this.create(c),this.nameLookup[c]=a,a++;return this.materialsArray},create:function(a){void 0===this.materials[a]&&this.createMaterial_(a);return this.materials[a]},createMaterial_:function(a){var c=
this.materialsInfo[a],d={name:a,side:this.side},m;for(m in c){var h=c[m];switch(m.toLowerCase()){case "kd":d.diffuse=(new THREE.Color).fromArray(h);break;case "ka":d.ambient=(new THREE.Color).fromArray(h);break;case "ks":d.specular=(new THREE.Color).fromArray(h);break;case "map_kd":d.map=this.loadTexture(this.baseUrl+h);d.map.wrapS=this.wrap;d.map.wrapT=this.wrap;break;case "ns":d.shininess=h;break;case "d":1>h&&(d.transparent=!0,d.opacity=h)}}d.diffuse&&(d.ambient||(d.ambient=d.diffuse),d.color=
d.diffuse);this.materials[a]=new THREE.MeshPhongMaterial(d);return this.materials[a]},loadTexture:function(a,c,d,m){if(/\.dds$/i.test(a))var h=THREE.ImageUtils.loadCompressedTexture(a,c,d,m);else m=new Image,h=new THREE.Texture(m,c),c=new THREE.ImageLoader,c.crossOrigin=this.crossOrigin,c.load(a,function(a){h.image=THREE.MTLLoader.ensurePowerOfTwo_(a);h.needsUpdate=!0;d&&d(h)});return h}};
THREE.MTLLoader.ensurePowerOfTwo_=function(a){if(!THREE.MTLLoader.isPowerOfTwo_(a.width)||!THREE.MTLLoader.isPowerOfTwo_(a.height)){var c=document.createElement("canvas");c.width=THREE.MTLLoader.nextHighestPowerOfTwo_(a.width);c.height=THREE.MTLLoader.nextHighestPowerOfTwo_(a.height);c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height);return c}return a};THREE.MTLLoader.isPowerOfTwo_=function(a){return 0===(a&a-1)};
THREE.MTLLoader.nextHighestPowerOfTwo_=function(a){--a;for(var c=1;32>c;c<<=1)a|=a>>c;return a+1};THREE.EventDispatcher.prototype.apply(THREE.MTLLoader.prototype);THREE.OBJMTLLoader=function(){};
THREE.OBJMTLLoader.prototype={constructor:THREE.OBJMTLLoader,load:function(a,c,d,m,h){var b=this;(new THREE.MTLLoader(a.substr(0,a.lastIndexOf("/")+1))).load(c,function(c){c.preload();var e=new THREE.XHRLoader(b.manager);e.setCrossOrigin(this.crossOrigin);e.load(a,function(a){a=b.parse(a);a.traverse(function(a){if(a instanceof THREE.Mesh&&a.material.name){var b=c.create(a.material.name);b&&(a.material=b)}});d(a)})})},parse:function(a,c){function d(a,b,c){return new THREE.Vector3(a,b,c)}function m(a,
b){return new THREE.Vector2(a,b)}function h(a,b,c,d){return new THREE.Face3(a,b,c,d)}function b(a,b){0<k.vertices.length&&(k.mergeVertices(),k.computeCentroids(),k.computeFaceNormals(),k.computeBoundingSphere(),e.add(t),k=new THREE.Geometry,t=new THREE.Mesh(k,s),r=0);void 0!==a&&(t.name=a);void 0!==b&&(s=new THREE.MeshLambertMaterial,s.name=b,t.material=s)}a=a.replace(/\ \\\r\n/g,"");a=a.replace(/f( +\d+)( +\d+)( +\d+)( +\d+)/g,"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)( +\d+\/\d+)/g,
"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)( +\d+\/\d+\/\d+)/g,"/f$1$2$4\n/f$2$3$4");a=a.replace(/f( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)( +\d+\/\/\d+)/g,"/f$1$2$4\n/f$2$3$4");for(var p=new THREE.Object3D,e=p,k=new THREE.Geometry,s=new THREE.MeshLambertMaterial,t=new THREE.Mesh(k,s),q=[],r=0,u=[],v=[],y=/v( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,z=/vn( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,A=/vt( +[\d|\.|\+|\-|e]+)( +[\d|\.|\+|\-|e]+)/,
w=/f( +\d+)( +\d+)( +\d+)/,n=/f( +(\d+)\/(\d+))( +(\d+)\/(\d+))( +(\d+)\/(\d+))/,f=/f( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))( +(\d+)\/(\d+)\/(\d+))/,C=/f( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))( +(\d+)\/\/(\d+))/,B=a.split("\n"),x=0;x<B.length;x++){var l=B[x],l=l.trim(),g;0!==l.length&&"#"!==l.charAt(0)&&(null!==(g=y.exec(l))?q.push(d(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]))):null!==(g=z.exec(l))?u.push(d(parseFloat(g[1]),parseFloat(g[2]),parseFloat(g[3]))):null!==(g=A.exec(l))?v.push(m(parseFloat(g[1]),
parseFloat(g[2]))):null!==(g=w.exec(l))?(k.vertices.push(q[parseInt(g[1])-1],q[parseInt(g[2])-1],q[parseInt(g[3])-1]),k.faces.push(h(r++,r++,r++))):null!==(g=n.exec(l))?(k.vertices.push(q[parseInt(g[2])-1],q[parseInt(g[5])-1],q[parseInt(g[8])-1]),k.faces.push(h(r++,r++,r++)),k.faceVertexUvs[0].push([v[parseInt(g[3])-1],v[parseInt(g[6])-1],v[parseInt(g[9])-1]])):null!==(g=f.exec(l))?(k.vertices.push(q[parseInt(g[2])-1],q[parseInt(g[6])-1],q[parseInt(g[10])-1]),k.faces.push(h(r++,r++,r++,[u[parseInt(g[4])-
1],u[parseInt(g[8])-1],u[parseInt(g[12])-1]])),k.faceVertexUvs[0].push([v[parseInt(g[3])-1],v[parseInt(g[7])-1],v[parseInt(g[11])-1]])):null!==(g=C.exec(l))?(k.vertices.push(q[parseInt(g[2])-1],q[parseInt(g[5])-1],q[parseInt(g[8])-1]),k.faces.push(h(r++,r++,r++,[u[parseInt(g[3])-1],u[parseInt(g[6])-1],u[parseInt(g[9])-1]]))):/^o /.test(l)?(e=new THREE.Object3D,e.name=l.substring(2).trim(),p.add(e)):/^g /.test(l)?b(l.substring(2).trim(),void 0):/^usemtl /.test(l)?b(void 0,l.substring(7).trim()):/^mtllib /.test(l)?
c&&(l=l.substring(7),l=l.trim(),c(l)):/^s /.test(l)||console.log("THREE.OBJMTLLoader: Unhandled line "+l))}b(void 0,void 0);return p}};THREE.EventDispatcher.prototype.apply(THREE.OBJMTLLoader.prototype);
